(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{332:function(n,e,t){"use strict";t.r(e);var r=t(33),a=Object(r.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"vue七-通过nginx的服务器配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue七-通过nginx的服务器配置"}},[n._v("#")]),n._v(" [Vue七]:通过nginx的服务器配置")]),n._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#_1-vue项目的配置"}},[n._v("1.vue项目的配置")])]),t("li",[t("a",{attrs:{href:"#_2-nginx的下载和配置"}},[n._v("2.nginx的下载和配置")])]),t("li",[t("a",{attrs:{href:"#_3-服务器node后端服务和nginx代理开启"}},[n._v("3.服务器node后端服务和nginx代理开启")])])])]),t("p"),n._v(" "),t("h2",{attrs:{id:"_1-vue项目的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue项目的配置"}},[n._v("#")]),n._v(" 1.vue项目的配置")]),n._v(" "),t("p",[n._v("  对于vue/cli3.x及以上版本的vue项目，其缺少配置文件，需要自己手动添加，在"),t("a",{attrs:{href:"https://blog.csdn.net/qq_31967985/article/details/99706139",target:"_blank",rel:"noopener noreferrer"}},[n._v(" 该文章 "),t("OutboundLink")],1),n._v("中有部分说明，主要应对请求跨域的问题。对此根目录下新建vue.config.js：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("module.exports={\n  devServer: {\n    proxy: {\n      \"/xxyy\": {           //xxyy为访问的API的前缀\n        target: \"http://localhost:8080\",// 要访问的接口域名和端口\n        changeOrigin: true, //开启代理：在本地会创建一个虚拟服务端，然后发送请求的数据，并同时接收请求的数据，这样服务端和服务端进行数据的交互就不会有跨域问题\n        pathRewrite: {\n            '^': '' //这里理解成用''代替target里面的所有地址\n          }\n      }\n    }\n  }  \n}\n")])])]),t("p",[n._v("完成上述配置，在项目中的所有的请求中都需要加上/xxyy，例如代码：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("this.$axios({\n\tmethod: 'post',\n\turl: '/xxyy/login,     //带上 /xxyy 前缀API请求都会经过上述配置的跨越设置\n\tdata: ···\n)}\n.then(res =>{})\n.catch(err => {})\n")])])]),t("p",[n._v("  对于后端的node服务，其接口的编写应该与前段一致（==具体来说应该是前段请求接口的编写应该按照后端的来==），及后端的API接收接口也要相应的为 /xxyy/··· 形式，node的服务打开3000端口。")]),n._v(" "),t("h2",{attrs:{id:"_2-nginx的下载和配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-nginx的下载和配置"}},[n._v("#")]),n._v(" 2.nginx的下载和配置")]),n._v(" "),t("p",[n._v("  Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务，在高连接并发的情况下，Nginx是Apache服务器不错的替代品。\n  "),t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("官网下载"),t("OutboundLink")],1),n._v(" 后直接解压复制到服务器，打开nginx/conf/ningx.conf进行修改：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('server {\n        listen       8080;               #前端访问开的端口号\n        server_name  localhost;          #如果是服务器上直接写 localhost 或者 127.0.0.1\n \n        location / {                     #页面访问配置\n            root   dist;                 #这里使用的是相对路径，也可以使用绝对路径\n            index  index.html;           #默认打开的文件\n        }\n \n        location /xxyy {                 #后端端口请求的配置\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Nginx-Proxy true;\n            proxy_set_header Connection "";\n            proxy_pass http://127.0.0.1:3000/xxyy/;     #后台接口的代理路径\n        }\n}\n')])])]),t("h2",{attrs:{id:"_3-服务器node后端服务和nginx代理开启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-服务器node后端服务和nginx代理开启"}},[n._v("#")]),n._v(" 3.服务器node后端服务和nginx代理开启")]),n._v(" "),t("p",[n._v("  对于后端的node服务，我们可以做直接在终端输入法如下命令开启服务：")]),n._v(" "),t("blockquote",[t("p",[n._v("node app.js")])]),n._v(" "),t("p",[n._v("但是对于单线程的node来说一旦出现异常或者崩溃就会导致服务停止无法访问。对此，我们可以通过第三方库"),t("a",{attrs:{href:"https://blog.csdn.net/chengxuyuanyonghu/article/details/74910875",target:"_blank",rel:"noopener noreferrer"}},[n._v("pm2"),t("OutboundLink")],1),n._v("避免：")]),n._v(" "),t("blockquote",[t("p",[n._v("npm install pm2 -g")])]),n._v(" "),t("p",[n._v("在node的项目目录下启动终端执行下面命令开启服务：")]),n._v(" "),t("blockquote",[t("p",[n._v("pm2 start app.js")])]),n._v(" "),t("p",[n._v("  对于nginx的启动，进入到nginx文件夹下打开终端，输入：")]),n._v(" "),t("blockquote",[t("p",[n._v("start nginx")])]),n._v(" "),t("p",[n._v("打开资源管理器发现有 nginx.exe 服务说明nginx已经启动。至此你可以在任何浏览器输入服务器的ip和端口号进行访问！")]),n._v(" "),t("p",[n._v("欢迎大家关注本人的微信公众号，微信公众号将不定期发送相应学习文章和教程")]),n._v(" "),t("p",[t("strong",[t("center",[n._v("微信号：chiyizao")])],1),n._v(" "),t("center",[n._v("或者微信公众号搜索：")]),t("center",[n._v("迟亦早")]),n._v(" "),t("strong",[t("center",[n._v("二维码")])],1),n._v(" "),t("center",[t("img",{staticStyle:{height:"250px",width:"250px"},attrs:{src:"/vxgzhcode.jpg"}})])],1)])}),[],!1,null,null,null);e.default=a.exports}}]);